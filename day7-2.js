// EXAMPLE DATA

let exampleData = [
  ".......S.......",
  "...............",
  ".......^.......",
  "...............",
  "......^.^......",
  "...............",
  ".....^.^.^.....",
  "...............",
  "....^.^...^....",
  "...............",
  "...^.^...^.^...",
  "...............",
  "..^...^.....^..",
  "...............",
  ".^.^.^.^.^...^.",
  "...............",
];

// MY DATA

let data = [
  "......................................................................S......................................................................",
  ".............................................................................................................................................",
  "......................................................................^......................................................................",
  ".............................................................................................................................................",
  ".....................................................................^.^.....................................................................",
  ".............................................................................................................................................",
  "....................................................................^.^.^....................................................................",
  ".............................................................................................................................................",
  "...................................................................^.^.^.^...................................................................",
  ".............................................................................................................................................",
  "..................................................................^.^.^.^.^..................................................................",
  ".............................................................................................................................................",
  ".................................................................^.^...^...^.................................................................",
  ".............................................................................................................................................",
  "................................................................^.^.^.^.^.^.^................................................................",
  ".............................................................................................................................................",
  "...............................................................^.......^...^.^...............................................................",
  ".............................................................................................................................................",
  "..............................................................^.^...^.^.....^.^..............................................................",
  ".............................................................................................................................................",
  ".............................................................^...^.^...^.....^.^.............................................................",
  ".............................................................................................................................................",
  "............................................................^.^.^.^...^...^.^.^.^............................................................",
  ".............................................................................................................................................",
  "...........................................................^.^.^...^.^.^.^.^.....^...........................................................",
  ".............................................................................................................................................",
  "..........................................................^.^.^...^.^.^.......^.^.^..........................................................",
  ".............................................................................................................................................",
  ".........................................................^.....^.....^.^.....^.^.^.^.........................................................",
  ".............................................................................................................................................",
  "........................................................^.....^...^.^.^.....^.^.^.^.^........................................................",
  ".............................................................................................................................................",
  ".......................................................^.^.^...^.^.^...^.^.^.^.^.^.^.^.......................................................",
  ".............................................................................................................................................",
  "......................................................^.^.^.^.^...^.^.^...^.....^...^.^......................................................",
  ".............................................................................................................................................",
  ".....................................................^...^.^.^.......^.....^.^.^.^.^...^.....................................................",
  ".............................................................................................................................................",
  "....................................................^.^.^...^.....^.^.^.^.^.........^.^.^....................................................",
  ".............................................................................................................................................",
  "...................................................^.^.^.^.^.^...^.^.....^...^.^...^.^.^.^...................................................",
  ".............................................................................................................................................",
  "..................................................^...^.^.^.^.....^.^...^.^.^.....^.^.^.^.^..................................................",
  ".............................................................................................................................................",
  ".................................................^...^.^.^.^.^.^.^.......^.^.^...^.....^.^.^.................................................",
  ".............................................................................................................................................",
  "................................................^.....^.^.^.^.^...^...^.^.^.^...^.^.....^...^................................................",
  ".............................................................................................................................................",
  "...............................................^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.....^.^.....^.^...............................................",
  ".............................................................................................................................................",
  "..............................................^.^.^...^.^.^.^...^...^...^.^.....^.^.^.^.^...^.^..............................................",
  ".............................................................................................................................................",
  ".............................................^.^.......^.^...^...^.^.^.....^.^...^...^.^.^...^.^.............................................",
  ".............................................................................................................................................",
  "............................................^...^.^.^.^.^.^.^.^.^...^...^.....^...^.^.^.^...^.^.^............................................",
  ".............................................................................................................................................",
  "...........................................^.^.^.^...^.......^.^.^.^.^.^.^.^.^.^.^...^.......^.^.^...........................................",
  ".............................................................................................................................................",
  "..........................................^.^.^...^.^...^.^...^.^.^.^.......^.^.^.^.....^...^.^...^..........................................",
  ".............................................................................................................................................",
  ".........................................^...^.^.^.^.^.^.^.^.^.^.^...^.^...^.^.^.^.^.^.^.^.^.^.....^.........................................",
  ".............................................................................................................................................",
  "........................................^.^.^...^.^.^.....^.^.^...^.^...^.^.^.^...^.^.^.^.^.^.^...^.^........................................",
  ".............................................................................................................................................",
  ".......................................^...^.....^.^.^.^.^.^.^...^.....^.^...^...^.^...^.^.^.^.^.^.^.^.......................................",
  ".............................................................................................................................................",
  "......................................^...^...^.^.....^...^.^.^...^.^.^.^.^...^.^...^.^.^.^.^.^...^...^......................................",
  ".............................................................................................................................................",
  ".....................................^...^.^.^.^.^.^.^.^.^...^.^...^.....^.^.^.^.^...^.^...^...^...^.^.^.....................................",
  ".............................................................................................................................................",
  "....................................^.^.^.....^.^.^.^.^.^.......^.^.....^.^...^.^.^.^.^.^.^...^...^.^.^.^....................................",
  ".............................................................................................................................................",
  "...................................^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.....^...^.^.^.^...................................",
  ".............................................................................................................................................",
  "..................................^.^.^...^...^.^...^.^.^.^.^.^.^...^...^...^.^.^.^.^.^...^.^.....^.^.^.^.^..................................",
  ".............................................................................................................................................",
  ".................................^.^...^.^...^.^.^...^.^.^.^.^.^.^...^.^.^.^...^.....^.^...^...^.^.^.^.^.^.^.................................",
  ".............................................................................................................................................",
  "................................^.^.......^.^.^.^.....^.^.....^...^.^.^.^.^.^.^.....^.^.^.^.^...^...^.^.^...^................................",
  ".............................................................................................................................................",
  "...............................^.^.^...^.^.^.....^.^.^.^.^.......^.^...^.^.^.^.^.....^.^.^...^.^.^.^...^.....^...............................",
  ".............................................................................................................................................",
  "..............................^...^...^.^.^...^...^.^.^.^.^.^.....^.^.^.^.^...^.....^.^.^.^...^.^...^.^.^.^...^..............................",
  ".............................................................................................................................................",
  ".............................^.^.............^.^.^...^.^.^.^...^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.....^.^.^.^.^.^.............................",
  ".............................................................................................................................................",
  "............................^.^.^.^...^.^.^.^.^.......^...^.^.^.^.....^.....^.......^.^.^.^.^.^.^.^.^...^...^.^.^............................",
  ".............................................................................................................................................",
  "...........................^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.......^.....^.^.^.^.^.^.^.^.^...^...^.^.^.^.^.........^...........................",
  ".............................................................................................................................................",
  "..........................^...^.^.^.^.^.....^.^.^.^...^...^.^.^.^.^.^.^.^...^.^.^...^.^.^...^.^.^...^.......^.^.^.^..........................",
  ".............................................................................................................................................",
  ".........................^.....^.^.^.....^...^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.^...^.^.^.^.^.......^.^.^.^.^...^.....^.........................",
  ".............................................................................................................................................",
  "........................^.^.....^.^.^.^.^.^.^...^...^.^.^.^.^...^...^.^.^...^.^.^.^.^...^.^.^...^.^.^.^.^.^.^.^...^.^........................",
  ".............................................................................................................................................",
  ".......................^.^.^.^...^...^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.^.^...^.^...^.^.^.^.^.^.^.....^.^...^.....^...^.^.......................",
  ".............................................................................................................................................",
  "......................^.^.^.^.^...^.^.........^.^...^.^.^.....^.^.^.^.^.^.^...^...^.^...^.^.^...^.^...^...^.^.^...^.^.^......................",
  ".............................................................................................................................................",
  ".....................^.^.^.^.....^.^.^.^.^.^...^.^.^.^.^...^.^.^.^.^.^.....^.^...^.^.^.^.^...^.....^.^.^.^.^.^.^.^.^.^.^.....................",
  ".............................................................................................................................................",
  "....................^.............^.^.^.^.^.....^.^...^.^.^.^.^...^.^.^.^.^.^.^.^.....^.^.^.^.^.^.....^...^...^.^.^.^...^....................",
  ".............................................................................................................................................",
  "...................^.^.....^.^...^.^.^.^.^.^.^...^...^...^.^.^...^.^.^.^.^.^.^.^...^.^.^.....^.^...^.^.....^...^...^.^.^.^...................",
  ".............................................................................................................................................",
  "..................^...^.^.^.^.^.^.^.^.^.^...^.^.^.^...^.^.^.^.^...^.^.^...^.^.^.....^.^.....^.^.^.^.^...^.......^.^.^...^.^..................",
  ".............................................................................................................................................",
  ".................^.^.^...^...^...^.^...^.^.....^...^.^.^.^.^.....^.^.^.^.^.^...^.....^.....^.....^.^.^...^.^...^.^.^.^.^.^.^.................",
  ".............................................................................................................................................",
  "................^.^.^.^...^.^.^.^.^.^...^.^.^...^.^.^.......^.^.^...^...^.^.^...^.^.^.^.^.^...^.^.^.....^.^.^.^.....^.^.^...^................",
  ".............................................................................................................................................",
  "...............^.^.^.^...^.^.^.^.^...^...^.^.....^.^.^.^...^.....^.^.^.^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.^.....^...^.....^...^.^...............",
  ".............................................................................................................................................",
  "..............^...^.^...^.^.^...^.^.^.^.^.^.^.^.^.^.^...^.....^.^.^.....^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.^.....^..............",
  ".............................................................................................................................................",
  ".............^.^.^.^.^.^.^.^...^.^.....^.^.^.^...^.^.^.^.^.^...^...^.^.^.^.^.^.^.^...^.^.^.^.^...^...^.....^.^.....^.^.^.^.^.^.^.............",
  ".............................................................................................................................................",
  "............^...^.^.^.^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.....^.^.^.^.^.^.^...^.^.^...^.^.^.^.^.....^.^.^.^.^.^.^.^.^...^...^.^.^............",
  ".............................................................................................................................................",
  "...........^.^.^...^.^.....^.^.^...^.^.^.....^.^.^.^.^...^.^.^.^.^...^.^.^.^...^.^.^.........^.^.^...^.^...^.^.^.^...^.^.^.^.^...^...........",
  ".............................................................................................................................................",
  "..........^.^.^.^.^.^.^.^.^.....^.^.^.^.^.^.^.^.^...^.^.^.^...^.^...^...^.^.^...^.....^.^.^.^...^.^.^.^.^.^...^.^.^.^.^...^.^.....^..........",
  ".............................................................................................................................................",
  ".........^.........^.^.^.^.^.^.^.....^...^.^.^.^...^.^.^.....^.^...^.^.^...^.^...^.^.^.....^.^.^...^.^.....^.^.^.^.......^.^.^.^...^.........",
  ".............................................................................................................................................",
  "........^.^.^.^.^.^.^.^.^...^...^...^.^...^.^.^.^.^...^.^...^.....^.^...^...^...^.^...^.^.^...^.^.^.^.^.^...^.^.^.^...^.^.^...^.^.^.^........",
  ".............................................................................................................................................",
  ".......^...^...^.^.^.^.....^.^.^.^.^.^.^.^...^.........^...^.^...^...^...^.....^.....^.....^.....^...^.^.^...^.^.^.^.^...^.^.^.^.^...^.......",
  ".............................................................................................................................................",
  "......^...^.^.^...^.^.^.^.^.^.^.^.^.^.^.^...^.^.^.^...^.^.^.^...^.^...^.^.^.^.^.^.^.^...^...^.^.^.^.^.^.....^.^.^.^.^.^.....^.^.....^.^......",
  ".............................................................................................................................................",
  ".....^.....^.^.^.^.^...^.^.^...^.^.......^...^...^.^.^.^.^.^.^.^.^.^.^.^.^.....^.^.^...^.^.^.^...^.^.^.^...^.....^.^.^.^.^.^.^.^.^.^.^.^.....",
  ".............................................................................................................................................",
  "....^.^.^.^.....^.^.^.....^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.^...^.^.^.^.^.^.^.^.^...^.^.^.^.^.^...^...^.^...^.^.^.^.^.^....",
  ".............................................................................................................................................",
  "...^.^.^...^.^.^.^.^.^.^.......^.^.....^.^...^...^.....^.^.^.......^.^.^...^.^.^.^.^.^...^.^.^...^.......^.^...^...^.^.^.^.^...^.^.^.^.^.^...",
  ".............................................................................................................................................",
  "..^.^.^...^.^.^.^.^...^...^.^.^...^...^...^.^...^...^.^.^...^...^...^.^.^...^.^.^.^...^.^...^...^.^...^.........^.^.^.^...^.^...^.^.^...^.^..",
  ".............................................................................................................................................",
  ".^.....^.^...^.^.^.....^...^...^...^.^...^.^...^...^.^...^.^.^.....^.^.^.^...^.^.....^.^...^.^.^...^.^.....^...^.^.^...^.......^.....^.^.^.^.",
  ".............................................................................................................................................",
];

function getTimelines(data) {
  let arr = data.map((val) => val.split(""));
  let timelinesCount = 0;

  for (let row = 0; row < arr.length - 1; row++) {
    for (let column = 0; column < arr[0].length; column++) {
      if (arr[row][column] === "S") {
        arr[row + 1][column] = 1;
      }
      if (row === arr.length - 2 && !isNaN(arr[row][column])) {
        timelinesCount += arr[row][column];
      }
      if (!isNaN(arr[row][column])) {
        if (arr[row + 1][column] === "^") {
          arr[row + 1][column - 1] =
            arr[row + 1][column - 1] === "."
              ? arr[row][column]
              : arr[row + 1][column - 1] + arr[row][column];
          arr[row + 1][column + 1] =
            arr[row + 1][column + 1] === "."
              ? arr[row][column]
              : arr[row + 1][column + 1] + arr[row][column];
          continue;
        }
        if (arr[row + 1][column] === ".") {
          arr[row + 1][column] = arr[row][column];
          continue;
        }
        if (!isNaN(arr[row + 1][column])) {
          arr[row + 1][column] += arr[row][column];
          continue;
        }
      }
    }
  }
  console.log(arr);
  console.log({ timelinesCount });
}

getTimelines(data);
// ANSWER 95408386769474
